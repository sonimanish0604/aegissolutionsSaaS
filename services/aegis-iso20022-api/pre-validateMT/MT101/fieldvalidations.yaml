- tag: "20"
  name: "Sender's Reference"
  sequence: "A"
  presence: mandatory
  format: "16x"
  description: "Reference assigned by the sender to uniquely identify the message."
  validations:
    - id: "20-NR-1"
      type: "network_rule"
      rule: "no_leading_or_trailing_slash_or_double_slash"
      error_code: "T26"
      message: "Field must not start or end with '/' and must not contain '//' anywhere in its contents."
  usage_notes:
    - id: "20-U-1"
      description: "Reference must be unique within the message (or chain of messages) for related queries, cancellations, etc."
- tag: "21R"
  name: "Customer Specified Reference"
  sequence: "A"
  presence: optional
  format: "16x"
  description: "Reference to the entire instruction assigned by the instructing party (when present) or the ordering customer."
  validations:
    - id: "21R-NR-1"
      type: "network_rule"
      rule: "no_leading_or_trailing_slash_or_double_slash"
      error_code: "T26"
      message: "Field must not start or end with '/' and must not contain '//' anywhere in its contents."
  usage_notes:
    - id: "21R-U-1"
      description: "When present, the ordering customer requests a single debit entry for the sum of all transactions (even across chained messages). If absent, debits are posted individually."
- tag: "28D"
  name: "Message Index/Total"
  sequence: "A"
  presence: mandatory
  format: "5n/5n"
  description: "Chains messages by specifying the current message index and total number of messages."
  usage_notes:
    - id: "28D-U-1"
      description: "Both the index and total allow the receiver to verify that all expected transactions have been received."
- tag: "50a"
  name: "Instructing Party"
  sequence: "A"
  presence: conditional
  description: "Identifies the customer authorised by the account owner/account servicing institution to order the transactions in the message."
  options_allowed: ["C", "L"]
  option_C:
    label: "Identifier Code"
    format: "4!a2!a2!c[3!c]"
    validations:
      - id: "50aC-NR-1"
        type: "network_rule"
        rule: "identifier_code_must_be_valid_bic"
        error_code: "T27"
        message: "Identifier Code must be a valid BIC in the required format (4!a2!a2!c[3!c])."
      - id: "50aC-NR-2"
        type: "network_rule"
        rule: "identifier_code_must_be_fin_destination"
        error_code: "T28"
        message: "Identifier Code must correspond to a valid FIN destination."
      - id: "50aC-NR-3"
        type: "network_rule"
        rule: "identifier_code_branch_identifier_validity"
        error_code: "T29"
        message: "Identifier Code must contain a valid branch identifier, when present."
      - id: "50aC-NR-4"
        type: "network_rule"
        rule: "identifier_code_non_connected_validity"
        error_code: "T45"
        message: "Identifier Code must not reference an invalid non-connected BIC."
      - id: "50aC-NR-5"
        type: "network_rule"
        rule: "identifier_code_must_be_non_financial_institution"
        error_code: "E57"
        message: "Identifier Code must identify a non-financial institution BIC."
  option_L:
    label: "Party Identifier"
    format: "35x"
    codes_allowed_ref: "lookups.party_identifier_codes"
  usage_notes:
    - id: "50a-U-1"
      description: "Only use this field when the instructing customer is different from the account owner."
    - id: "50a-U-2"
      description: "Provides the party authorised by the account owner/account servicing institution to instruct all transactions in the message."
    - id: "50a-U-3"
      description: "Mutually exclusive with sequence B occurrences of field 50a (option C or L) per cross-field rule C4."
- tag: "50a"
  name: "Ordering Customer"
  sequence: "A"
  presence: conditional
  presence_condition: "See network rule C3 for exclusivity with sequence B occurrences."
  description: "Identifies the account owner whose account is to be debited with all transactions in sequence B."
  options_allowed: ["F", "G", "H"]
  option_F:
    label: "Party Identifier / Number, Name and Address"
    format: "35x 4*(1!n/33x)"
    party_identifier_formats:
      - "35x"
      - "4!a/2!a/27x"
    name_and_address_line_format: "1!n/33x"
    line_number_lookup_ref: "lookups.option_F_line_numbers"
    codes_allowed_ref: "lookups.party_identifier_codes"
    validations:
      - id: "50aF-NR-1"
        type: "network_rule"
        rule: "option_f_party_identifier_line_structure"
        error_code: "T54"
        message: "Party Identifier line must use 35x or 4!a/2!a/27x and each subsequent line must follow 1!n/33x."
      - id: "50aF-NR-2"
        type: "network_rule"
        rule: "option_f_party_identifier_code_lookup"
        error_code: "T55"
        message: "When Party Identifier uses code/country/identifier format, the code must be one of the allowed values."
      - id: "50aF-NR-3"
        type: "network_rule"
        rule: "option_f_party_identifier_country_iso"
        error_code: "T73"
        message: "When Party Identifier uses code/country/identifier format, the country code must be a valid ISO country code."
      - id: "50aF-NR-4"
        type: "network_rule"
        rule: "option_f_first_name_address_line_is_1"
        error_code: "T56"
        message: "First Name/Address line must begin with number 1."
      - id: "50aF-NR-5"
        type: "network_rule"
        rule: "option_f_numbers_in_ascending_order"
        error_code: "T56"
        message: "Numbered Name/Address lines must appear in ascending numerical order."
      - id: "50aF-NR-6"
        type: "network_rule"
        rule: "option_f_requires_number_3_with_country"
        error_code: "T56"
        message: "At least one Name/Address line must use number 3 to provide country and town information."
      - id: "50aF-NR-7"
        type: "network_rule"
        rule: "option_f_number_3_country_iso"
        error_code: "T73"
        message: "The first occurrence of number 3 must include a valid ISO country code."
      - id: "50aF-NR-8"
        type: "network_rule"
        rule: "option_f_number_repeat_constraints"
        error_code: "T56"
        message: "Numbers 1, 2, and 3 may repeat at most twice; numbers 4, 5, 6, 7, and 8 must not repeat."
      - id: "50aF-NR-9"
        type: "network_rule"
        rule: "option_f_numbers_4_and_5_pairing"
        error_code: "T56"
        message: "Number 4 must not be used without number 5, and number 5 must not be used without number 4."
      - id: "50aF-NR-10"
        type: "network_rule"
        rule: "option_f_number_4_valid_date"
        error_code: "T50"
        message: "Number 4 must be followed by a valid date in YYYYMMDD that is not later than the sender's submission date."
      - id: "50aF-NR-11"
        type: "network_rule"
        rule: "option_f_numbers_5_6_7_country_iso"
        error_code: "T73"
        message: "Numbers 5, 6, and 7 must include a valid ISO country code."
      - id: "50aF-NR-12"
        type: "network_rule"
        rule: "option_f_numbers_5_6_7_details_required"
        error_code: "T56"
        message: "Numbers 5, 6, and 7 must be followed by '/' and additional identifying details."
      - id: "50aF-NR-13"
        type: "network_rule"
        rule: "option_f_number_8_usage_constraints"
        error_code: "T56"
        message: "Number 8 may only be used to continue information for identifiers provided under numbers 1, 6, or 7."
  option_G:
    label: "Account / Identifier Code"
    format: "/34x 4!a2!a2!c[3!c]"
    validations:
      - id: "50aG-NR-1"
        type: "network_rule"
        rule: "identifier_code_must_be_valid_bic"
        error_code: "T27"
        message: "Identifier Code must be a valid BIC in the required format (4!a2!a2!c[3!c])."
      - id: "50aG-NR-2"
        type: "network_rule"
        rule: "identifier_code_must_be_fin_destination"
        error_code: "T28"
        message: "Identifier Code must correspond to a valid FIN destination."
      - id: "50aG-NR-3"
        type: "network_rule"
        rule: "identifier_code_branch_identifier_validity"
        error_code: "T29"
        message: "Identifier Code must contain a valid branch identifier, when present."
      - id: "50aG-NR-4"
        type: "network_rule"
        rule: "identifier_code_non_connected_validity"
        error_code: "T45"
        message: "Identifier Code must not reference an invalid non-connected BIC."
      - id: "50aG-NR-5"
        type: "network_rule"
        rule: "identifier_code_must_be_non_financial_institution"
        error_code: "E57"
        message: "Identifier Code must identify a non-financial institution BIC."
  option_H:
    label: "Account / Name and Address"
    format: "/34x 4*35x"
  usage_notes:
    - id: "50a-OC-U-1"
      description: "Provide both the ordering customer's account (either explicitly in line 1 or implied by the identifier code) and sufficient identification through name/address or BIC information."
    - id: "50a-OC-U-2"
      description: "Numbers 1, 2, and 3 in option F may repeat to accommodate additional details; numbers 4–8 follow the specific usage constraints in the SWIFT standard."
    - id: "50a-OC-U-3"
      description: "Mutually exclusive with sequence B occurrences of field 50a (options F, G, or H) per cross-field rule C3."
- tag: "52a"
  name: "Account Servicing Institution"
  sequence: "A"
  presence: conditional
  presence_condition: "See cross-field rule C6 for exclusivity with sequence B occurrences."
  description: "Specifies the institution servicing the ordering customer's account when different from the message receiver, even if field 50a contains an IBAN."
  options_allowed: ["A", "C"]
  option_A:
    label: "Party Identifier / Identifier Code"
    format: "[/1!a][/34x] 4!a2!a2!c[3!c]"
    national_clearing_codes_ref: "lookups.national_clearing_codes"
    validations:
      - id: "52aA-NR-1"
        type: "network_rule"
        rule: "identifier_code_must_be_valid_bic"
        error_code: "T27"
        message: "Identifier Code must be a valid BIC in the required format (4!a2!a2!c[3!c])."
      - id: "52aA-NR-2"
        type: "network_rule"
        rule: "identifier_code_must_be_fin_destination"
        error_code: "T28"
        message: "Identifier Code must correspond to a valid FIN destination."
      - id: "52aA-NR-3"
        type: "network_rule"
        rule: "identifier_code_branch_identifier_validity"
        error_code: "T29"
        message: "Identifier Code must contain a valid branch identifier, when present."
      - id: "52aA-NR-4"
        type: "network_rule"
        rule: "identifier_code_non_connected_validity"
        error_code: "T45"
        message: "Identifier Code must not reference an invalid non-connected BIC."
      - id: "52aA-NR-5"
        type: "network_rule"
        rule: "identifier_code_must_be_financial_institution"
        error_code: "C05"
        message: "Identifier Code must identify a registered financial institution BIC."
  option_C:
    label: "Party Identifier"
    format: "/34x"
    national_clearing_codes_ref: "lookups.national_clearing_codes"
  usage_notes:
    - id: "52a-U-1"
      description: "Prefer option A when the account servicing institution can be identified by a financial institution BIC."
    - id: "52a-U-2"
      description: "When no financial institution BIC is available, use option C with a recognised national clearing system code (prefixed with '//') and account details."
    - id: "52a-U-3"
      description: "Information provided should be meaningful to the receiver; sequence A occurrences are mutually exclusive with sequence B per rule C6."
- tag: "51A"
  name: "Sending Institution"
  sequence: "A"
  presence: optional
  format: "[/1!a][/34x] 4!a2!a2!c[3!c]"
  description: "Identifies the sender of the message (only permitted for FileAct transmissions)."
  validations:
    - id: "51A-NR-1"
      type: "network_rule"
      rule: "field_51a_allowed_only_in_fileact"
      error_code: "D63"
      message: "Field 51A may only be present in FileAct messages."
    - id: "51A-NR-2"
      type: "network_rule"
      rule: "identifier_code_must_be_valid_bic"
      error_code: "T27"
      message: "Identifier Code must be a valid BIC in the required format (4!a2!a2!c[3!c])."
    - id: "51A-NR-3"
      type: "network_rule"
      rule: "identifier_code_must_be_fin_destination"
      error_code: "T28"
      message: "Identifier Code must correspond to a valid FIN destination."
    - id: "51A-NR-4"
      type: "network_rule"
      rule: "identifier_code_branch_identifier_validity"
      error_code: "T29"
      message: "Identifier Code must contain a valid branch identifier, when present."
    - id: "51A-NR-5"
      type: "network_rule"
      rule: "identifier_code_non_connected_validity"
      error_code: "T45"
      message: "Identifier Code must not reference an invalid non-connected BIC."
    - id: "51A-NR-6"
      type: "network_rule"
      rule: "identifier_code_must_be_financial_institution"
      error_code: "C05"
      message: "Identifier Code must identify a registered financial institution BIC."
  usage_notes:
    - id: "51A-U-1"
      description: "Ensure the first eight characters of the Identifier Code match the originator of the FileAct message."
    - id: "51A-U-2"
      description: "Together with field 20 (Sender's Reference), this field forms the message identification for queries, cancellations, and related follow-ups."
- tag: "30"
  name: "Requested Execution Date"
  sequence: "A"
  presence: mandatory
  format: "6!n"
  description: "Specifies the date on which all subsequent transactions should be initiated by the executing bank."
  validations:
    - id: "30-NR-1"
      type: "network_rule"
      rule: "must_be_valid_date_yymmdd"
      error_code: "T50"
      message: "Date must be a valid calendar date expressed as YYMMDD."
  usage_notes:
    - id: "30-U-1"
      description: "Represents the debit date for the ordering customer's account(s)."
- tag: "25"
  name: "Authorisation"
  sequence: "A"
  presence: optional
  format: "35x"
  description: "Carries additional security information (for example, digital signatures) agreed between the ordering customer/instructing party and the account servicing institution."
  usage_notes:
    - id: "25-U-1"
      description: "Enables the receiver to verify that the account owner authorised the instruction using the agreed security mechanism."
- tag: "21"
  name: "Transaction Reference"
  sequence: "B"
  presence: mandatory
  format: "16x"
  description: "Unique reference for the individual transaction within this occurrence of sequence B."
  validations:
    - id: "21-NR-1"
      type: "network_rule"
      rule: "no_leading_or_trailing_slash_or_double_slash"
      error_code: "T26"
      message: "Field must not start or end with '/' and must not contain '//' anywhere in its contents."
  usage_notes:
    - id: "21-U-1"
      description: "Combined with field 20 (Sender's Reference) to identify transactions in queries, cancellations, and related follow-ups."
- tag: "21F"
  name: "F/X Deal Reference"
  sequence: "B"
  presence: conditional
  presence_condition: "See cross-field rules C1 and C9 for conditional usage."
  format: "16x"
  description: "Specifies the foreign exchange contract reference between the ordering customer and the account servicing financial institution."
  special_values: ["NONREF"]
  validations:
    - id: "21F-NR-1"
      type: "network_rule"
      rule: "no_leading_or_trailing_slash_or_double_slash"
      error_code: "T26"
      message: "Field must not start or end with '/' and must not contain '//' anywhere in its contents."
- tag: "23E"
  name: "Instruction Code"
  sequence: "B"
  presence: optional
  presence_condition: "Referenced by cross-field rule C9."
  format: "4!c[/30x]"
  description: "Specifies the instruction(s) agreed between the ordering customer and the account servicer for processing the transaction."
  values_ref: "lookups.instruction_codes"
  additional_info_allowed_for: ["CMTO", "PHON", "OTHR", "REPA"]
  repetition:
    disallow_same_code_twice: true
    allow_repeat_only: ["OTHR"]
  forbidden_combinations:
    error_code: "D67"
    pairs:
      - ["CHQB", "CMSW"]
      - ["CHQB", "CMTO"]
      - ["CHQB", "CMZB"]
      - ["CHQB", "CORT"]
      - ["CHQB", "NETS"]
      - ["CHQB", "PHON"]
      - ["CHQB", "REPA"]
      - ["CHQB", "RTGS"]
      - ["CHQB", "URGP"]
      - ["CMSW", "CMTO"]
      - ["CMSW", "CMZB"]
      - ["CMTO", "CMZB"]
      - ["CORT", "CMSW"]
      - ["CORT", "CMTO"]
      - ["CORT", "CMZB"]
      - ["CORT", "REPA"]
      - ["EQUI", "CMSW"]
      - ["EQUI", "CMTO"]
      - ["EQUI", "CMZB"]
      - ["NETS", "RTGS"]
  validations:
    - id: "23E-NR-1"
      type: "network_rule"
      rule: "no_leading_or_trailing_slash_or_double_slash"
      error_code: "T26"
      message: "Field must not start or end with '/' and must not contain '//' anywhere in its contents."
    - id: "23E-NR-2"
      type: "network_rule"
      rule: "instruction_code_must_be_recognised"
      error_code: "T47"
      message: "Instruction Code must be one of the SWIFT-recognised codes for MT101."
    - id: "23E-NR-3"
      type: "network_rule"
      rule: "instruction_code_additional_info_allowed_only_for_specific_codes"
      error_code: "D66"
      message: "Additional Information is only allowed for codes CMTO, PHON, OTHR, and REPA."
    - id: "23E-NR-4"
      type: "network_rule"
      rule: "instruction_code_disallow_duplicate_except_othr"
      error_code: "E46"
      message: "When repeating this field, the same code may appear only once except for OTHR."
    - id: "23E-NR-5"
      type: "network_rule"
      rule: "instruction_code_forbidden_combinations"
      error_code: "D67"
      message: "Prohibited combinations of instruction codes detected within the same sequence B occurrence."
  usage_notes:
    - id: "23E-U-1"
      description: "Code REPA signals that the payment resulted from an e-payments initiation and should trigger the beneficiary bank's product-specific handling."
    - id: "23E-U-2"
      description: "Use of code EQUI requires prior agreement between the ordering and beneficiary customers and with the account servicing institution."
    - id: "23E-U-3"
      description: "When multiple codes are present, list them in the SWIFT-recommended order: receiver instructions, routing codes, end-party instructions, then informational codes."
- tag: "32B"
  name: "Currency/Transaction Amount"
  sequence: "B"
  presence: mandatory
  presence_condition: "Referenced by cross-field rules C2, C5, C8, and C9."
  format: "3!a15d"
  description: "Specifies the currency and amount of the transfer to be executed by the receiver."
  constraints:
    currency: "ISO4217"
    disallow_commodities: ["XAU", "XAG", "XPD", "XPT"]
  validations:
    - id: "32B-NR-1"
      type: "network_rule"
      rule: "currency_must_be_valid_iso4217"
      error_code: "T52"
      message: "Currency must be a valid ISO 4217 currency code."
    - id: "32B-NR-2"
      type: "network_rule"
      rule: "amount_integer_part_at_least_one_digit"
      error_code: "C03"
      message: "Amount must include at least one digit before the decimal comma."
    - id: "32B-NR-3"
      type: "network_rule"
      rule: "amount_decimal_places_within_currency_precision"
      error_code: "T40"
      message: "Number of digits after the decimal comma must not exceed the precision allowed for the currency."
    - id: "32B-NR-4"
      type: "network_rule"
      rule: "amount_decimal_comma_mandatory"
      error_code: "T43"
      message: "Amount must include a decimal comma."
    - id: "32B-NR-5"
      type: "network_rule"
      rule: "currency_not_in_disallowed_commodities"
      error_code: "C08"
      message: "Commodity currency codes XAU, XAG, XPD, and XPT are not permitted in this field."
  usage_notes:
    - id: "32B-U-1"
      description: "If field 71A is BEN or SHA, receiver/beneficiary charges may be deducted from this amount."
- tag: "50a"
  name: "Instructing Party"
  sequence: "B"
  presence: conditional
  presence_condition: "See cross-field rule C4 for exclusivity with sequence A occurrences."
  description: "Identifies the customer authorised by the account owner/account servicing institution to order the transactions within this occurrence of sequence B."
  options_allowed: ["C", "L"]
  option_C: "@@fields.50a.option_C"
  option_L: "@@fields.50a.option_L"
- tag: "50a"
  name: "Ordering Customer"
  sequence: "B"
  presence: conditional
  presence_condition: "See cross-field rule C3 for exclusivity with sequence A occurrences."
  description: "Identifies the ordering customer (account owner) for this occurrence of sequence B."
  options_allowed: ["F", "G", "H"]
  option_F: "@@fields.50a.option_F"
  option_G: "@@fields.50a.option_G"
  option_H: "@@fields.50a.option_H"
  usage_notes:
    - id: "50a-OC-B-U-1"
      description: "Provide the ordering customer's account and identification details in line with the SWIFT option selected (F, G, or H)."
    - id: "50a-OC-B-U-2"
      description: "Mutually exclusive with sequence A occurrences of field 50a (options F, G, or H) per cross-field rule C3."
- tag: "52a"
  name: "Account Servicing Institution"
  sequence: "B"
  presence: conditional
  presence_condition: "See cross-field rule C6 for exclusivity with sequence A occurrences."
  description: "Specifies the institution servicing the ordering customer's account for this sequence B transaction when different from the message receiver."
  options_allowed: ["A", "C"]
  option_A: "@@fields.52a.option_A"
  option_C: "@@fields.52a.option_C"
  usage_notes:
    - id: "52a-B-U-1"
      description: "Prefer option A with a financial institution BIC; use option C only when a national clearing system identifier is required."
    - id: "52a-B-U-2"
      description: "Ensure the coded information remains meaningful to the receiver; sequence B occurrences must not coexist with sequence A per rule C6."
- tag: "56a"
  name: "Intermediary"
  sequence: "B"
  presence: optional
  presence_condition: "Referenced by cross-field rule C7."
  description: "Identifies the intermediary financial institution through which the transaction must pass to reach the account with institution."
  options_allowed: ["A", "C", "D"]
  option_A:
    label: "Party Identifier / Identifier Code"
    format: "[/1!a][/34x] 4!a2!a2!c[3!c]"
    national_clearing_codes_ref: "lookups.national_clearing_codes"
    validations:
      - id: "56aA-NR-1"
        type: "network_rule"
        rule: "identifier_code_must_be_valid_bic"
        error_code: "T27"
        message: "Identifier Code must be a valid BIC in the required format (4!a2!a2!c[3!c])."
      - id: "56aA-NR-2"
        type: "network_rule"
        rule: "identifier_code_must_be_fin_destination"
        error_code: "T28"
        message: "Identifier Code must correspond to a valid FIN destination."
      - id: "56aA-NR-3"
        type: "network_rule"
        rule: "identifier_code_branch_identifier_validity"
        error_code: "T29"
        message: "Identifier Code must contain a valid branch identifier, when present."
      - id: "56aA-NR-4"
        type: "network_rule"
        rule: "identifier_code_non_connected_validity"
        error_code: "T45"
        message: "Identifier Code must not reference an invalid non-connected BIC."
      - id: "56aA-NR-5"
        type: "network_rule"
        rule: "identifier_code_must_be_financial_institution"
        error_code: "C05"
        message: "Identifier Code must identify a registered financial institution BIC."
  option_C:
    label: "Party Identifier"
    format: "/34x"
    national_clearing_codes_ref: "lookups.national_clearing_codes"
  option_D:
    label: "Party Identifier / Name and Address"
    format: "[/1!a][/34x] 4*35x"
    name_and_address_format: "4*35x"
    national_clearing_codes_ref: "lookups.national_clearing_codes"
  usage_notes:
    - id: "56a-U-1"
      description: "Option A (BIC) is preferred; use option C for clearing system codes or option D only when name/address details are mandated by regulation or bilateral agreement."
    - id: "56a-U-2"
      description: "When using clearing system codes //FW, //AU, //CP, or //IN, ensure they appear only once across fields 56a and 57a, and in the first of those fields."
- tag: "57a"
  name: "Account With Institution"
  sequence: "B"
  presence: conditional
  presence_condition: "Required by cross-field rule C7 when field 56a is present."
  description: "Specifies the financial institution servicing the beneficiary customer's account."
  options_allowed: ["A", "C", "D"]
  option_A:
    label: "Party Identifier / Identifier Code"
    format: "[/1!a][/34x] 4!a2!a2!c[3!c]"
    national_clearing_codes_ref: "lookups.national_clearing_codes"
    validations:
      - id: "57aA-NR-1"
        type: "network_rule"
        rule: "identifier_code_must_be_valid_bic"
        error_code: "T27"
        message: "Identifier Code must be a valid BIC in the required format (4!a2!a2!c[3!c])."
      - id: "57aA-NR-2"
        type: "network_rule"
        rule: "identifier_code_must_be_fin_destination"
        error_code: "T28"
        message: "Identifier Code must correspond to a valid FIN destination."
      - id: "57aA-NR-3"
        type: "network_rule"
        rule: "identifier_code_branch_identifier_validity"
        error_code: "T29"
        message: "Identifier Code must contain a valid branch identifier, when present."
      - id: "57aA-NR-4"
        type: "network_rule"
        rule: "identifier_code_non_connected_validity"
        error_code: "T45"
        message: "Identifier Code must not reference an invalid non-connected BIC."
      - id: "57aA-NR-5"
        type: "network_rule"
        rule: "identifier_code_must_be_financial_institution"
        error_code: "C05"
        message: "Identifier Code must identify a registered financial institution BIC."
  option_C:
    label: "Party Identifier"
    format: "/34x"
    national_clearing_codes_ref: "lookups.national_clearing_codes"
  option_D:
    label: "Party Identifier / Name and Address"
    format: "[/1!a][/34x] 4*35x"
    name_and_address_format: "4*35x"
    national_clearing_codes_ref: "lookups.national_clearing_codes"
  usage_notes:
    - id: "57a-U-1"
      description: "When absent, the receiver is assumed to be the account with institution."
    - id: "57a-U-2"
      description: "Option A is preferred; use option C for clearing system identifiers or option D only when name/address details are mandated."
    - id: "57a-U-3"
      description: "Clearing system codes //FW, //AU, //CP, or //IN must appear only once across fields 56a and 57a and in the first of those fields when used."
- tag: "59a"
  name: "Beneficiary"
  sequence: "B"
  presence: mandatory
  options_allowed: ["", "A", "F"]
  option_:
    label: "Account / Name and Address"
    format: "[/34x] 4*35x"
  option_A:
    label: "Account / Identifier Code"
    format: "[/34x] 4!a2!a2!c[3!c]"
    validations:
      - id: "59aA-NR-1"
        type: "network_rule"
        rule: "identifier_code_must_be_valid_bic"
        error_code: "T27"
        message: "Identifier Code must be a valid BIC in the required format (4!a2!a2!c[3!c])."
      - id: "59aA-NR-2"
        type: "network_rule"
        rule: "identifier_code_must_be_fin_destination"
        error_code: "T28"
        message: "Identifier Code must correspond to a valid FIN destination."
      - id: "59aA-NR-3"
        type: "network_rule"
        rule: "identifier_code_branch_identifier_validity"
        error_code: "T29"
        message: "Identifier Code must contain a valid branch identifier, when present."
      - id: "59aA-NR-4"
        type: "network_rule"
        rule: "identifier_code_non_connected_validity"
        error_code: "T45"
        message: "Identifier Code must not reference an invalid non-connected BIC."
  option_F:
    label: "Account / Number, Name and Address"
    format: "[/34x] 4*(1!n/33x)"
    line_number_lookup_ref: "lookups.beneficiary_option_F_line_numbers"
    validations:
      - id: "59aF-NR-1"
        type: "network_rule"
        rule: "beneficiary_option_f_first_line_is_1"
        error_code: "T56"
        message: "First Number/Name and Address line must begin with number 1."
      - id: "59aF-NR-2"
        type: "network_rule"
        rule: "beneficiary_option_f_numbers_in_ascending_order"
        error_code: "T56"
        message: "Number/Name and Address lines must appear in ascending numerical order."
      - id: "59aF-NR-3"
        type: "network_rule"
        rule: "beneficiary_option_f_requires_number_3"
        error_code: "T56"
        message: "At least one Number/Name and Address line must use number 3 for country and town information."
      - id: "59aF-NR-4"
        type: "network_rule"
        rule: "beneficiary_option_f_only_allows_numbers_1_to_3"
        error_code: "T56"
        message: "Only numbers 1, 2, and 3 may be used in Number/Name and Address lines."
      - id: "59aF-NR-5"
        type: "network_rule"
        rule: "beneficiary_option_f_number_repeat_constraints"
        error_code: "T56"
        message: "Numbers 1, 2, and 3 may each appear at most twice."
      - id: "59aF-NR-6"
        type: "network_rule"
        rule: "beneficiary_option_f_number_3_country_iso"
        error_code: "T73"
        message: "The first occurrence of number 3 must include a valid ISO country code."
  usage_notes:
    - id: "59a-U-1"
      description: "At minimum, provide the beneficiary's name or BIC; include the account number when known."
    - id: "59a-U-2"
      description: "When option F uses number 2 (address line), ensure the first occurrence of number 3 includes the beneficiary's town in additional details."
    - id: "59a-U-3"
      description: "If instruction code CHQB is present in field 23E, do not include an account line in field 59a."
    - id: "59a-U-4"
      description: "Follow the agreed Chinese Commercial Code guidelines when Chinese characters are required and bilaterally agreed."
- tag: "70"
  name: "Remittance Information"
  sequence: "B"
  presence: optional
  format: "4*35x"
  codes_allowed_ref: "lookups.remittance_codes"
  validations:
    - id: "70-NR-1"
      type: "network_rule"
      rule: "remittance_info_codes_must_be_recognised"
      error_code: "T47"
      message: "Codes enclosed in '/' must be one of INV, IPI, RFB, ROC, or TSU."
  usage_notes:
    - id: "70-U-1"
      description: "Content is passed to the beneficiary; verify any length restrictions with the receiver before use."
    - id: "70-U-2"
      description: "Multiple references may be included by separating each with a double slash ('//'); do not repeat the same code within a single occurrence."
    - id: "70-U-3"
      description: "When providing an ISO 11649 Creditor Reference, place it on the first line with no other characters."
    - id: "70-U-4"
      description: "TSU references must follow the pattern /TSU/<transaction>/<invoice>/<amount>."
- tag: "77B"
  name: "Regulatory Reporting"
  sequence: "B"
  presence: optional
  format: "3*35x"
  codes_allowed_ref: "lookups.regulatory_reporting_codes"
  validation_notes:
    - "Line 1 may follow the pattern /<Code>/<Country Code>[//additional information]; subsequent lines may continue additional information prefixed with '//'."
  usage_notes:
    - id: "77B-U-1"
      description: "Use this field to provide statutory or regulatory details required by the receiver’s or sender’s authorities."
    - id: "77B-U-2"
      description: "Code BENEFRES/ORDERRES indicates the country of residence of the beneficiary or ordering customer; ensure the country code uses ISO 3166-1 alpha-2."
    - id: "77B-U-3"
      description: "Only include information that is not already captured in other fields of the message."
- tag: "33B"
  name: "Currency/Original Ordered Amount"
  sequence: "B"
  presence: conditional
  presence_condition: "See cross-field rules C2, C5, and C9 for conditional usage."
  format: "3!a15d"
  description: "Specifies the original currency and amount as instructed by the ordering customer when different from field 32B."
  constraints:
    currency: "ISO4217"
  validations:
    - id: "33B-NR-1"
      type: "network_rule"
      rule: "currency_must_be_valid_iso4217"
      error_code: "T52"
      message: "Currency must be a valid ISO 4217 currency code."
    - id: "33B-NR-2"
      type: "network_rule"
      rule: "amount_integer_part_at_least_one_digit"
      error_code: "C03"
      message: "Amount must include at least one digit before the decimal comma."
    - id: "33B-NR-3"
      type: "network_rule"
      rule: "amount_decimal_places_within_currency_precision"
      error_code: "T40"
      message: "Number of digits after the decimal comma must not exceed the precision allowed for the currency."
    - id: "33B-NR-4"
      type: "network_rule"
      rule: "amount_decimal_comma_mandatory"
      error_code: "T43"
      message: "Amount must include a decimal comma."
  usage_notes:
    - id: "33B-U-1"
      description: "Populate when the ordering customer's instructed currency/amount differs from the execution currency/amount in field 32B."
- tag: "71A"
  name: "Details of Charges"
  sequence: "B"
  presence: mandatory
  format: "3!a"
  codes_allowed_ref: "lookups.charge_codes"
  validations:
    - id: "71A-NR-1"
      type: "network_rule"
      rule: "charge_code_must_be_recognised"
      error_code: "T08"
      message: "Charges code must be one of BEN, OUR, or SHA."
  usage_notes:
    - id: "71A-U-1"
      description: "Specifies who bears charges for subsequent transfers (BEN, OUR, or SHA)."
    - id: "71A-U-2"
      description: "These charge codes cover downstream MT102/MT103 processing; MT101 messaging fees are handled separately."
- tag: "25A"
  name: "Charges Account"
  sequence: "B"
  presence: optional
  format: "/34x"
  description: "Indicates the ordering customer's account to which transaction charges should be booked separately."
  usage_notes:
    - id: "25A-U-1"
      description: "If provided, the account number must differ from the one specified in field 50a (Ordering Customer)."
- tag: "36"
  name: "Exchange Rate"
  sequence: "B"
  presence: conditional
  presence_condition: "See cross-field rule C2 (and C1) for conditional usage."
  format: "12d"
  description: "Specifies the exchange rate applied when converting the original ordered amount to the transaction amount."
  validations:
    - id: "36-NR-1"
      type: "network_rule"
      rule: "amount_decimal_places_within_currency_precision"
      error_code: "T40"
      message: "Exchange rate fractional precision must not exceed the allowed number of digits."
    - id: "36-NR-2"
      type: "network_rule"
      rule: "amount_decimal_comma_mandatory"
      error_code: "T43"
      message: "Exchange rate must include a decimal comma."
  usage_notes:
    - id: "36-U-1"
      description: "Use when the original and transaction amounts differ; aligns with cross-field rules ensuring consistency with fields 32B and 33B."
